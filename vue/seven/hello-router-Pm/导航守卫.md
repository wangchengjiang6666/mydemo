# 导航守卫

在路由切换的时候，会触发的一些函数，又可以称之为 导航守卫的钩子函数。

#### 三大块

1. 全局守卫
   1.1 全局的前置守卫 路由实例对象.beforeEach
   1.2 全局的后置守卫 路由实例对象.afterEach
2. 路由独享
   2.1 beforeEnter
3. 组件内守卫
   3.1 beforeRouteEnter 将要进入这个路由的时候
   3.2 beforeRouteUpdate 处理那个详情页数据不更新的问题。
   3.3 beforeRouteLeave 将要离开的时候

#### 守卫函数的参数

以上 6 个守卫中函数，大部分都有如下几个参数

1. to 将要去到的路由信息对象
2. from 当前路由信息对象
3. next 一个函数，由他来控制，是否放行。
   3.1 next() 放行，你之前要去哪里，就滚去哪里。
   3.2 next(false) 不放行。
   3.3 next('/detail/1') 放行，但是把你带到 详情页去了。
   3.4 next({
   name: 'abc',
   params: {
   id: 1
   }
   })

#### 这些守卫的执行顺序。

/a -> /b

1. 触发 /a 这个路由所指定的路由页面组件中的 beforeRouteLeave 守卫
2. 触发 全局的前置守卫 beforeEach
3. 触发 /b 这个路由规则中所定义 路由独享 beforeEnter
4. 触发 /b 这个路由所指定的路由页面组件中的 beforeRouteEnter 守卫
5. beforeRouteUpdate 会不会被触发？他只 /a -> /a 这种的类型的时候才触发
6. 触发 全局的后置守卫

#### 导航守卫一般可以实现的效果是

1. 页面跳转时进度条
2. 页面跳转时修改 title
   2.1 首先给需要修改 title 的规则上。写上 title 为 xxx
   2.2 在全局守卫中，取出 title 。并赋值给 document.title = xxxx;
3. 做登录拦截。。。。
   3.1 首先实现一个 钱包 页面。路由设置 /money
   3.2 在列表页中，提供一个 router-link 让其点击能够进入到 钱包页
   3.3 钱包页面，不允许不登录进去。必须登录成功才能访问
   3.4 实现一个登录页面，这里使用 一个 window.isLogin 来作为是否登录的依据
   3.5 分析项目，找出需要登录之后才能够进入的路由页面，给这些路由规则 的 meta 里面设置一个 needLogin 为 true
   3.6 在全局前置守卫中，进行判断，首先判断 to.meta.needLogin 是否为 true。再接着判断是否有登录状态，如果有，那么就放行。如果没有，那么不好意思，先去登录页面。

#### ? 如何在登录成功之后，跳转到你之前先要去的页面 ？

1. 将之前想要去的路径。保存到本地存储中
2. 将之前想要去的路径，通过 url 地址的参数传递到 登录页。然后登录页从参数上拿出去用就 ok。
